-*- mode: org; mode: auto-fill; fill-column: 80; -*-
#+TITLE: K-Planes Tasks
#+STARTUP: indent overview
#+TODO: TODO DEFER | DONE

* DONE [5/5] Version 0.1.0
- Just one contract, enough to check how to do the basics.
- Some details copied and modified from GAP.
  
** DONE Add Agencies, Contract Groups, basic mod structure
** DONE Add KACA agency logo from NACA
** DONE Add KASA agency logo from NASA
** DONE Add Makefile build and test system
** DONE Add first contract type and fix bugs

* TODO [4/12] Version 0.2.0

** DONE Add all GAP milestone contracts
- Including Heli and Seaplane too
- Not yet converted to planet agnostic
** DONE Would it make sense to group all K-Planes groups into one?
** DONE Generate milestone contracts from ContractTable.csv
- Use python
- Add to build system
** DONE Add reward scaling
- Based on distance/speed/altitude  
** TODO Agent names have to be real names, not ids.
** TODO Only add Agent if one with same name does not exist.
- &AGENT[KASA]:LAST[KPlanes]
** TODO Why is second contract not acceptable?
** TODO Better format for altitude
- AltMin = 1000 (double)
- NameAltMin = Troposhere Low
- PrettyAltMin = "10km (Troposphere Low)"
- AltMax similar
- PrettyAltLimits =
  - AltMin only :: "above 10km (Troposphere Low)"
  - AltMax only :: not allowed, either min or min/max
  - AltMin & AltMax :: "between 10km and 20km (Troposphere Low)"
    - Latter name is taken from min
- Use similar for SpeedMin/SpeedMax, DistMin, DistMax
** TODO Ensure localized strings use Pretty versions
"asdasd".Format(...)
- How to do this?
** TODO Better height definitions:

| Squad      | KPlanes          | Stock Alt | Equation                     | Stock Value | RSS Value | Actual |
|------------+------------------+-----------+------------------------------+-------------+-----------+--------|
| FlyingLow  | TroposphereLow   |           | Floor(FH * 0.1000)           |           1 |         5 |        |
| FlyingLow  | TroposphereHigh  |           | Ceil(FH * 0.1700)            |           3 |         8 |        |
| FlyingLow  | StratosphereLow  |           | Ceil(FH * 0.2400)            |           5 |        12 |     12 |
| FlyingLow  | StratosphereHigh |           | Floor(FH * 0.5000)           |           9 |        25 |        |
|------------+------------------+-----------+------------------------------+-------------+-----------+--------|
| FlyingHigh | MesosphereLow    |        18 | FH                           |          18 |        50 |     50 |
| FlyingHigh | MesosphereHigh   |           | Floor((SL-FH) * 0.3500) + FH |          36 |        67 |        |
| FlyingHigh | ThermosphereLow  |           | Floor((SL-FH) * 0.7000) + FH |          54 |        85 |     85 |
| FlyingHigh | ThermosphereHigh |           | Floor((SL-FH) * 0.8500) + FH |          62 |        92 |        |
|------------+------------------+-----------+------------------------------+-------------+-----------+--------|
| SpaceLow   | KarmanLine       |        70 | SL                           |          70 |       100 |    100 |
| SpaceLow   | SpaceLEO         |           | Floor((SH-SL) * 0.1265) + SL |          92 |           |    340 |
|------------+------------------+-----------+------------------------------+-------------+-----------+--------|
| SpaceHigh  | SpaceMEO         |       250 | SH                           |         250 |           |   2000 |
| SpaceHigh  | SpaceGEO         |      2868 | SGEO                         |        2868 |     35786 |  35786 |
|------------+------------------+-----------+------------------------------+-------------+-----------+--------|
| SOI        | SpaceSOI         |     84159 | SOI                          |       84159 |           |    N/A |

- SpaceLEO :: Uses the ISS height, since LEO is actually 140 to 2000 in real world.

** TODO Change requirements in table to be just contract name (so more can be added)
** TODO Change reward scale to seperate coloumns: Funds, Science and Reputation
- These are values assuming scale = 1, so easy to balance
- Take them from existing contracts
** TODO Add atmosphere scaling
- Based on Stock, 2.5/2.7 or RSS scaling
- Troposphere, Stratosphere, Karman Line/Space
** TODO Ensure craft do not miuse parachutes
- Parachutes can only be used after landing.
** TODO How to do distance?
- Use Waypoint Generator to create waypoint with suitable min/max distance from launch
  site.
- For pole :: must reach pole waypoint and return to KSC
- For around the world :: place waypoint 90 W, 270 W on equator then return to
  KSC
- Possibly calculate great circle with start point and 90 W?
** TODO How to do air launch?
- Allow one staging event
- Before staging, whole craft is validated
- Staging must occur:
  - Above a certain height
  - Remaining craft is then validated again
- Player must also land other aircraft
** TODO How to do payload delivery?
- Allow one staging event
- Must occur above a certain height
- Primary craft is validated
- Secondary craft can be made of anything, but must exceed payload mass
- Player must land primary
** TODO Add automated GitHub release
** TODO Add CKAN information
** TODO Add automated SpaceDock release

* Contract Table

Values are for Stock Kerbin, but are dynamically scaled according to home world planet's dimensions/atmosphere.

| Agent  | Name                         | Style        |       Value | Rocket? | Staging? | Air Launch? |
|--------+------------------------------+--------------+-------------+---------+----------+-------------|
| Wright | First Flight                 | Fly          |           - | N       | N        | N           |
| Wright | 2500m                        | Height       |        2500 | N       | N        | N           |
| Wright | 100m/s                       | Speed        |         100 | N       | N        | N           |
| Wright | Seaplane                     | Land         |         Sea | N       | N        | N           |
| Wright | Helicopter                   | Land         |     KSC VAB | N       | N        | N           |
| Wright | 10km                         | Distance     |          10 | N       | N        | N           |
| Wright | 5000m                        | Height       |        5000 | N       | N        | N           |
| Wright | 100km                        | Distance     |         100 | N       | N        | N           |
| Wright | 200m/s                       | Speed        |         200 | N       | N        | N           |
| Wright | 1000km                       | Distance     |        1000 | N       | N        | N           |
| Wright | Mountaineer                  | Land         |         *M* | N       | N        | N           |
| Wright | Long Distance                | Distance     |       10000 | N       | N        | N           |
|--------+------------------------------+--------------+-------------+---------+----------+-------------|
| KACA   | 10000m                       | Height       |       10000 | Y       | N        | Y           |
| KACA   | Mach 1                       | Speed        |         330 | Y       | N        | Y           |
| KACA   | Stratosphere Low *1*         | Height       |       20000 | Y       | N        | Y           |
| KACA   | Mach 2                       | Speed        |         660 | Y       | N        | Y           |
| KACA   | Jet VTOL                     | Land         |           - | N       | N        | N           |
| KACA   | To The North Pole            | Distance *4* |       19000 | N       | N        | N           |
| KACA   | Stratosphere High *2*        | Height       |       35000 | Y       | N        | Y           |
| KACA   | Mach 3                       | Speed        |         990 | Y       | N        | Y           |
| KACA   | Around The World             | Distance *4* |       38000 | N       | N        | N           |
| KACA   | Stratospheric Jet            | Height       |       35000 | N       | N        | N           |
| KACA   | Mach 3 Jet                   | Speed        |         990 | N       | N        | N           |
| KACA   | Around The Poles             | Distance *4* |       38000 | N       | N        | N           |
|--------+------------------------------+--------------+-------------+---------+----------+-------------|
| KASA   | Mesosphere *3*               | Height       |       57000 | Y       | N        | N           |
| KASA   | Mach 4                       | Speed        |        1320 | Y       | N        | N           |
| KASA   | Rocket VTOL                  | Land         |           - | Y       | N        | N           |
| KASA   | Sub-Orbital                  | Height       |       70000 | Y       | N        | N           |
| KASA   | Mach 5                       | Speed        |        1650 | Y       | N        | N           |
| KASA   | Going Electrical *5*         | Distance     |       38000 | N       | N        | N           |
| KASA   | Orbital Shuttle              | Distance     |       Orbit | Y       | Y        | N           |
| KASA   | Orbital Shuttle 1T Payload   | Payload      |           1 | Y       | Y        | N           |
| KASA   | Orbital Shuttle 10T Payload  | Payload      |          10 | Y       | Y        | N           |
| KASA   | Orbital Shuttle 30T Payload  | Distance     |          30 | Y       | Y        | N           |
| KASA   | Sub-Orbital SSTO             | Height       |       70000 | Y       | N        | N           |
| KASA   | Orbital SSTO                 | Distance     |       Orbit | Y       | N        | N           |
|--------+------------------------------+--------------+-------------+---------+----------+-------------|
| SSI    | Orbital SSTO 1T Payload      | Payload      |           1 | Y       | N        | N           |
| SSI    | Orbital SSTO 10T Payload     | Payload      |          10 | Y       | N        | N           |
| SSI    | Orbital SSTO 30T Payload     | Payload      |          30 | Y       | N        | N           |
| SSI    | Orbital GEO SSTO 15T Payload | Payload      |          15 | Y       | N        | N           |
| SSI    | Lunar Orbit SSTO             | Distance     | Lunar Orbit | Y       | N        | N           |
| SSI    | Lunar Orbit SSTO 1T Payload  | Payload      |           1 | Y       | N        | N           |
| SSI    | Lunar Orbit SSTO 10T Payload | Payload      |          10 | Y       | N        | N           |
| SSI    | Lunar Land SSTO              | Distance     |  Lunar Land | Y       | N        | N           |
| SSI    | Lunar Land SSTO 1T Payload   | Payload      |           1 | Y       | N        | N           |
| SSI    | Lunar Land SSTO 10T Payload  | Payload      |          10 | Y       | N        | N           |
| SSI    | Lunar Land SSTO 30T Payload  | Payload      |          30 | Y       | N        | N           |
| SSI    | Lunar Land SSTO 50T Payload  | Payload      |          50 | Y       | N        | N           |
|--------+------------------------------+--------------+-------------+---------+----------+-------------|

Key:

*M* :: Mountain biome and landed at >1000m, can use plane or helicopter
*1* :: Flying High + 1/9th
*2* :: Third way between Flying High to Space (70 - 18) / 3 + 18 == 35)
*3* :: Three quarters Flying High to Space (70 - 18) * 0.75 + 18 = 57)
*4* :: Circumference of home world, great circle from location through pole or
*equator at 90 degrees West (following sun)
*5* :: Similar to Around The World but only electric engines. Allow RTG, Solar, Batteries
and Nuclear.
